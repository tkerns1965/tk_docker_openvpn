version: '3'

services:
  base:
    build: base
    image: img_tkdovpn_base
    container_name: cnt_tkdovpn_base

  server:
    build: server
    image: img_tkdovpn_server
    container_name: cnt_tkdovpn_server
    privileged: true
    # stdin_open: true
    # tty: true
    volumes:
      - vol_tkdovpn_certs:/tkdovpn/certs
    depends_on:
      - base

  client:
    build: client
    image: img_tkdovpn_client
    container_name: cnt_tkdovpn_client
    privileged: true
    # stdin_open: true
    # tty: true
    volumes:
      - vol_tkdovpn_certs:/tkdovpn/certs
    depends_on:
      - base
      - server

volumes:
  vol_tkdovpn_certs:
